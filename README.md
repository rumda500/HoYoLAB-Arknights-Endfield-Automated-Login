# Automated Login Bonus Collection (HoYoLAB & Arknights Endfield)

このスクリプトは、無料で利用できる**Google Apps Script (GAS)** を利用して、HoYoLAB（原神、崩壊：スターレイル、ゼンレスゾーンゼロ、崩壊3rd）およびアークナイツ：エンドフィールドのサインイン（ログインボーナス受け取り）を自動化するためのツールです。

## 特徴

- ✅ **完全自動化**: Googleのサーバー上で毎日決まった時間に実行されます。
- ✅ **複数ゲーム対応**: 原神、スタレ、ゼンゼロ、崩壊3rdに加え、最新のエンドフィールドにも対応。
- ✅ **失敗通知**: サインインに失敗した時（トークン切れ等）のみ、Discordにメンション付きで通知します。
- ✅ **セキュア**: あなた個人のGoogleアカウント内でのみ動作します。

## 🚀 セットアップ手順

### 1. スクリプトの作成
1. [Google Apps Script](https://script.google.com/) にアクセスし、「新しいプロジェクト」を作成します。
2. `コード.gs` に本リポジトリの `Automated Login Bonus Collection Complete Edition.gs` の内容をすべて貼り付けます。
3. **対象ゲームの選択**: スクリプト内の `Genshin: true` などの値を `false` に書き換えることで、特定のゲームの自動サインインを無効化できます。無効にしたゲームについては、通知も行われません。

### 2. トークンの取得

#### HoYoLAB用（原神、スタレ、ゼンゼロ、崩壊3rd）
1. ブラウザで [HoYoLAB 公式サイト](https://www.hoyolab.com/) にログインします。
2. 以下のいずれかの方法でトークンを取得します。
   - **方法A（拡張機能）**: `Cookie-Editor` 等を用いて `ltuid_v2` と `ltoken_v2` をコピー。
   - **方法B（開発者ツール）**: `F12` キーで開発者ツールを開き、「Application」→「Cookies」→ `https://act.hoyolab.com/` を選択。`ltuid_v2` と `ltoken_v2` の値をコピー。
3. コピーした値を以下の形式でスクリプトの `token` 欄に貼り付けます。
   - 形式: `ltuid_v2=xxxx; ltoken_v2=xxxx;`
   - 例: `ltuid_v2=123456789; ltoken_v2=v2_aB1cD2eF3...;`（セミコロンを忘れずに！）

#### エンドフィールド用
1. [エンドフィールド サインインページ](https://game.skport.com/endfield/sign-in) にログインします。
2. 開発者ツールの「Application」→「Cookies」から `.skport.com` を選択し、`ACCOUNT_TOKEN` の値を探します。
3. **⚠️重要**: 以下のいずれかを行ってから値をコピーしてください。
   - `Show URL-decoded` を有効にしてからコピーする。
   - コピーした値に含まれる `%` を `/` に手動で置換する。
4. スクリプトの `Endfield_token` 欄に貼り付けます。

### 3. Discord通知の設定（任意）
1. Discordサーバーのチャンネル設定から「ウェブフック URL」を作成・コピーします。
2. スクリプトの `discordWebhookUrl` 欄に貼り付けます。
3. **カスタマイズ**: `mention`（メンション先）、`notificationColor`（通知色）、`notificationTitle`（タイトル）を必要に応じて変更可能です。
   - ※デフォルトでは失敗時のみ `@everyone` で通知が届きます。

### 4. 定期実行の設定
1. GASエディタの左側メニューから「デプロイ」の隣にある「トリガー（時計アイコン）」をクリックします。
2. 右下の「トリガーを追加」ボタンを押し、以下の設定で保存します。
   - 実行する関数: `main`
   - デプロイ: `Head`
   - イベントのソース: `時間主導型`
   - 時間ベースのトリガーのタイプ: `日付ベースのタイマー`
   - 時刻を選択: （午前2時〜5時など、更新時間以降のゆとりある時間を推奨）

## ⚠️ 注意事項

- **トークンの期限**: トークンは数ヶ月で期限切れになることがあります。通知が届いたら取得し直してください。
- **秘密の保持**: トークンやWebhook URLが記載されたスクリプトを他人に共有したり、公開しないよう注意してください。
- **エンドフィールドのデコード**: `ACCOUNT_TOKEN` が正しくデコード（`%` → `/`）されていないとログインに失敗します。

## 免責事項
このスクリプトの使用によって生じたアカウントの凍結や不利益について、制作者は一切の責任を負いません。自己責任でご利用ください。

